#!/bin/bash

PS3='select database to use: '

# todo add stop-option
#options=("mysql" "postgresql" "quit")
#select DB in "${options[@]}"; do
    #case $DB in
        #"mysql")
            #echo "you chose choice $REPLY which is $DB"
            #;;
        #*) echo "invalid option $REPLY";;
    #esac
#done

# sets: $DB, $REPLY
select DB in mysql postgresql stop ; do
	case $DB in
		"stop")
			sudo systemctl stop mysql postgresql nginx redis-server elasticsearch php7.4-fpm.service php8.4-fpm.service php8.3-fpm.service
			sudo systemctl status mysql postgresql nginx redis-server elasticsearch | grep '.service -\|Active:'
			;;
		*)
			sudo systemctl stop mysql postgresql
			sudo systemctl restart $DB nginx redis-server
			sudo systemctl status $DB nginx redis-server | grep '.service -\|Active:'

			# read -p "Elasticsearch [n]? " -n 1 -r
			echo		# (optional) move to a new line
			if [[ $REPLY =~ ^[Yy]$ ]]
			then
				sudo systemctl start elasticsearch
				sudo systemctl status elasticsearch | grep '.service -\|Active:'
			fi

			;;
	esac
	break	# or select will loop
done

